{{template "navbar/header".}}

<div class="p-5">
    <!-- You can open the modal using ID.showModal() method -->
    <button class="btn btn-primary" onclick="my_modal_3.showModal()">
        <i class="bi bi-columns-gap"></i> Tambah Kategori
    </button>
    <dialog id="my_modal_3" class="modal">
        <div class="modal-box">
            <form method="dialog">
                <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
            </form>
            <form action="/admin/simpan-kategori" autocomplete="off" method="post">
                <p>Fun Run*</p>
                <input type="text" name="funrun" class="input w-full mb-5" placeholder="5K" required>

                <p>Nama*</p>
                <input type="text" name="nama" class="input w-full mb-5" placeholder="Nama Kategori" required>

                <p>Harga*</p>
                <input type="number" name="harga" class="input w-full mb-5" placeholder="Harga" required>

                <p>Limit*</p>
                <input type="number" name="limit" class="input w-full mb-5" placeholder="Limit" required>

                <p>Status</p>
                <select name="status" class="w-full border rounded-sm mb-5 p-2" required>
                    <option value="">--Pilih Status--</option>
                    <option value="Hidden">Hidden</option>
                    <option value="Show">Show</option>
                </select>

                <p>Noted (opsional)</p>
                <input type="text" name="noted" value="{{.Noted}}" class="input w-full mb-5" placeholder="Noted">

                <div class="text-end">
                    <button type="submit" class="btn btn-primary">Simpan Kategori</button>
                </div>
            </form>
        </div>
    </dialog>

    <div class="divider"></div>

    <div class="overflow-x-auto rounded-box border border-base-content/5 bg-base-100">
        <table class="table">
            <!-- head -->
            <thead>
                <tr>
                    <th>Funrun</th>
                    <th>Nama Kategori</th>
                    <th>Slug</th>
                    <th>Harga</th>
                    <th>Limit</th>
                    <th>Status</th>
                    <th>Noted</th>
                    <th>Tidakan</th>
                </tr>
            </thead>
            <tbody>
                {{range .kategori}}
                <tr>
                    <td>{{.Funrun}}</td>
                    <td>{{.Nama}}</td>
                    <td>{{.Slug}}</td>
                    <td>Rp {{number_format .Harga}}</td>
                    <td>{{.Limit}}</td>
                    <td>{{.Status}}</td>
                    <td>{{.Noted}}</td>
                    <td>
                        <div class="join gap-1">
                            <!-- You can open the modal using ID.showModal() method -->
                            <button class="text-amber-600 cursor-pointer" onclick="Kat('{{.ID}}')">
                                UPD |
                            </button>
                            <dialog id="Kat{{.ID}}" class="modal">
                                <div class="modal-box">
                                    <form method="dialog">
                                        <button
                                            class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
                                    </form>
                                    <form action="/admin/update-kategori/{{.ID}}" autocomplete="off" method="post">
                                        <p>Nama Kategori*</p>
                                        <input type="text" name="nama" value="{{.Nama}}" class="input w-full mb-5"
                                            placeholder="Nama Kategori" required>

                                        <p>Harga*</p>
                                        <input type="number" name="harga" value="{{.Harga}}" class="input w-full mb-5"
                                            placeholder="Harga" required>

                                        <p>Limit*</p>
                                        <input type="number" name="limit" value="{{.Limit}}" class="input w-full mb-5"
                                            placeholder="Limit" required>

                                        <p>Status</p>
                                        <select name="status" class="w-full border rounded-sm mb-5 p-2" required>
                                            <option value="">--Pilih Status--</option>
                                            <option value="Hidden" {{if eq .Status "Hidden"}} selected {{end}}>Hidden</option>
                                            <option value="Show" {{if eq .Status "Show"}} selected {{end}}>Show</option>
                                        </select>

                                        <p>Noted (opsional)</p>
                                        <input type="text" name="noted" value="{{.Noted}}" class="input w-full mb-5"
                                            placeholder="Noted">

                                        <div class="text-end">
                                            <button type="submit" class="btn btn-warning">Update Kategori</button>
                                        </div>
                                    </form>
                                </div>
                            </dialog>

                            <form action="/admin/hapus-kategori/{{.ID}}" class="join-item" method="post">
                                <button type="submit" class="text-red-700 cursor-pointer"
                                    onclick="return confirm('Hapus {{.Nama}} ?')">DEL</button>
                            </form>
                        </div>
                    </td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </div>
</div>

<script>
    function Kat(id) {
        document.getElementById("Kat" + id).showModal();
    }
</script>

{{template "navbar/footer".}}